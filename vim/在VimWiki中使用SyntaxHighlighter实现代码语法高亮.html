<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <title>在 VimWiki 中使用 SyntaxHighlighter 实现代码语法高亮</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="幽谷奇峰">

    <!-- Le styles -->
    <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="../google-code-prettify/sons-of-obsidian.css" rel="stylesheet">
    <link href="../mystyle.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="../ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../ico/apple-touch-icon-57-precomposed.png">
  </head>
  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../index.html">幽谷奇峰</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="../index.html">主页</a></li>
              <li><a href="../linux/index.html">Linux</a></li>
              <li class="active"><a href="../vim/index.html">Vim</a></li>
              <li><a href="../webdesign/index.html">前端设计</a></li>
              <li><a href="../c_cpp/index.html">C和C++</a></li>
              <li><a href="../python/index.html">Python</a></li>
              <li class="divider-vertical"></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">联系我 <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="https://twitter.com/yysfirecn">@推一推我</a></li>
                  <li><a href="https://www.facebook.com/yaley2">君要你死</a></li>
                  <li><a href="../about.html">给我写信</a></li>
                </ul> <!--/.dropdown-menu -->
              </li> <!--/.dropdown -->
            </ul> <!--/.nav -->
          </div> <!--/.nav-collapse -->

          <div class="pull-right">
            <form class="navbar-search" action="../search.html">
              <!--<div class="input-append">-->
                <input type="text" name="q" class="search-query input-medium" placeholder="搜索">
                <button type="submit" class="icon nav-search"><i class="icon-search icon-white"></i></button>
              <!--</div>-->
            </form>
          </div>

        </div> <!-- /.container -->
      </div> <!--/.navbar-inner-->
    </div> <!--/.navbar-->
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span9">
          <ul class="breadcrumb">
            <li>
            <a href="../index.html">首页</a> <span class="divider">/</span>
            </li>
            <li>
            <a href="../vim/index.html">Vim</a> <span class="divider">/</span>
            </li>
            <li class="active">你的位置</li>
          </ul>
          
<div class="toc">
<ul>
<li><a href="#toc_1">在 VimWiki 中使用 SyntaxHighlighter 实现代码语法高亮</a>
<ul>
<li><a href="#toc_1.1">SyntaxHighlighter 基本用法</a>
<ul>
<li><a href="#toc_1.1.1">载入核心JS脚本和样式文件</a>
<li><a href="#toc_1.1.2">载入对应代码的brush脚本</a>
<li><a href="#toc_1.1.3">调用 SyntaxHighlighter.all() 方法</a>
</ul>
<li><a href="#toc_1.2">使用 SyntaxHighlighter 3.0.83 的 AutoLoader 特性</a>
<li><a href="#toc_1.3">SyntaxHighlighter 3.0.83 的一些配置选项</a>
<ul>
<li><a href="#toc_1.3.1">使用 <code>SyntaxHighlighter.defaults['配置选项']='值'</code> 的方式配置的选项</a>
<li><a href="#toc_1.3.2">使用 <code>SyntaxHighlighter.config.配置选项='值'</code> 的方式配置的选项</a>
<li><a href="#toc_1.3.3">配置示例</a>
</ul>
<li><a href="#toc_1.4">去掉SyntaxHighlighter 3.0.83 右边的滚动条</a>
<ul>
<li><a href="#toc_1.4.1">方法一：</a>
<li><a href="#toc_1.4.2">方法二：</a>
</ul>
<li><a href="#toc_1.5">参考网站</a>
</ul>
</ul>
</div>
<hr />
<ul>
<li>
Last Modified: 2012-07-10 23:28:42

<li>
First Created: 2012-07-10 22:50:03

</ul>
<hr />
<h1 id="toc_1">在 VimWiki 中使用 SyntaxHighlighter 实现代码语法高亮</h1>

<p>
下载最新的 <a href="http://alexgorbatchev.com/SyntaxHighlighter/download/download.php?sh_current">SyntaxHighlighter</a> 3.0.83
</p>

<p>
将压缩包里的 scripts 和 styles 文件夹解压到 VimWiki 的 html 文件输出目录下。我将它们都放在syntaxhighlighter目录下。
</p>

<h2 id="toc_1.1">SyntaxHighlighter 基本用法</h2>

<h3 id="toc_1.1.1">载入核心JS脚本和样式文件</h3>
<p>
在模板文件的 &lt;head&gt;&lt;/head&gt; 标签之间加入以下代码：
</p>
<pre class="brush:xml">
    &lt;script type="text/javascript" src="%root_path%syntaxhighlighter/scripts/shCore.js"&gt;&lt;/script&gt;
    &lt;link type="text/css" rel="Stylesheet" href="%root_path%syntaxhighlighter/styles/shCore.css"/&gt;
    &lt;link type="text/css" rel="Stylesheet" href="%root_path%syntaxhighlighter/styles/shThemeRDark.css"/&gt;
</pre>
<p>
这段代码的作用是，分别载入核心JS脚本、核心样式文件和主题样式文件。其中，shCore.css 可以用其他的 core 系列的样式文件，例如shCoreDefault.css来代替。同样的，shThemeRDark.css 也可以用其他的 Theme 系列样式文件代替，例如shThemeEclipse.css。
</p>

<p>
<strong>注意：js和css文件的路径一定要设置正确。</strong>
</p>

<h3 id="toc_1.1.2">载入对应代码的brush脚本</h3>
<p>
如果页面要高亮的代码有Python代码和Javascript代码，那么就再在 &lt;head&gt;&lt;/head&gt; 标签之间加入以下代码：
</p>
<pre class="brush:xml">
    &lt;script type="text/javascript" src="%root_path%syntaxhighlighter/scripts/shBrushPython.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="%root_path%syntaxhighlighter/scripts/shBrushJScript.js"&gt;&lt;/script&gt;
</pre>
  
<h3 id="toc_1.1.3">调用 SyntaxHighlighter.all() 方法</h3>
<p>
在 &lt;/body&gt; 标签前加入以下代码：
</p>
<pre class="brush:xml">
    &lt;script type="text/javascript"&gt;
         SyntaxHighlighter.all()
    &lt;/script&gt;
</pre>

<h2 id="toc_1.2">使用 SyntaxHighlighter 3.0.83 的 AutoLoader 特性</h2>
<p>
SyntaxHighlighter 3.0.83 引入了shAutoLoader.js，可以实现根据页面的内容自动选择加载所需要的 brush 脚本。
使用方法就是在 &lt;/body&gt; 标签前加入以下代码：
</p>
<pre class="brush:js; highlight:[6,39]">
    &lt;script src="%root_path%syntaxhighlighter/scripts/shAutoloader.js" type="text/javascript"&gt;&lt;/script&gt;
    &lt;script type="text/javascript"&gt;var root_path='%root_path%';&lt;/script&gt;
    &lt;script type="text/javascript"&gt;
    function path()
    {
        var scripts_path=root_path+'syntaxhighlighter/scripts/';
        var args = arguments, result = [];
        for(var i = 0; i &lt; args.length; i++)
        result.push(args[i].replace('@', scripts_path));
        return result
    };
    SyntaxHighlighter.autoloader.apply(null, path(
                                                  'applescript            @shBrushAppleScript.js',
                                                  'actionscript3 as3      @shBrushAS3.js',
                                                  'bash shell             @shBrushBash.js',
                                                  'powershell ps          @shBrushPowerShell.js',
                                                  'coldfusion cf          @shBrushColdFusion.js',
                                                  'cpp c                  @shBrushCpp.js',
                                                  'c# c-sharp csharp      @shBrushCSharp.js',
                                                  'css                    @shBrushCss.js',
                                                  'delphi pascal          @shBrushDelphi.js',
                                                  'diff patch pas         @shBrushDiff.js',
                                                  'erl erlang             @shBrushErlang.js',
                                                  'groovy                 @shBrushGroovy.js',
                                                  'java                   @shBrushJava.js',
                                                  'jfx javafx             @shBrushJavaFX.js',
                                                  'js jscript javascript  @shBrushJScript.js',
                                                  'perl pl                @shBrushPerl.js',
                                                  'php                    @shBrushPhp.js',
                                                  'text plain             @shBrushPlain.js',
                                                  'py python              @shBrushPython.js',
                                                  'ruby rails ror rb      @shBrushRuby.js',
                                                  'sass scss              @shBrushSass.js',
                                                  'scala                  @shBrushScala.js',
                                                  'sql                    @shBrushSql.js',
                                                  'vb vbnet               @shBrushVb.js',
                                                  'xml xhtml xslt html    @shBrushXml.js'
                                                  ));
    SyntaxHighlighter.all();
    &lt;/script&gt;
</pre>
  
<h2 id="toc_1.3">SyntaxHighlighter 3.0.83 的一些配置选项</h2>
<p>
SyntaxHighlighter的配置选项分为两类，一类是使用<code>SyntaxHighlighter.defaults['配置选项']='值'</code>的方式配置，另一类是使用<code>SyntaxHighlighter.config.配置选项='值'</code>的方式配置。
</p>

<p>
<strong>注意：配置语句必须在调用SyntaxHighlighter.all()之前</strong>
</p>

<h3 id="toc_1.3.1">使用 <code>SyntaxHighlighter.defaults['配置选项']='值'</code> 的方式配置的选项</h3>

<table>
<tr>
<th>
配置选项
</th>
<th>
缺省值
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
auto-links
</td>
<td>
true
</td>
<td>
如果此项开启，代码中的超链接文字将被a标签套上，也就可以点击了
</td>
</tr>
<tr>
<td>
class-name
</td>
<td>
''
</td>
<td>
为代码块加上自定义样式类，比如加上border
</td>
</tr>
<tr>
<td>
collapse
</td>
<td>
false
</td>
<td>
在页面刚加载时，代码被折叠起来，如果代码篇幅较大，可以考虑考虑
</td>
</tr>
<tr>
<td>
first-line
</td>
<td>
1
</td>
<td>
行号从这个设置值开始，一般都是1
</td>
</tr>
<tr>
<td>
gutter
</td>
<td>
true
</td>
<td>
是否显示行号
</td>
</tr>
<tr>
<td>
highlight
</td>
<td>
null
</td>
<td>
高亮显示指定的代码行。可以通过单个数字来高亮显示单行，或者传入一个类似 [1,2,3] 的数组来高亮显示指定的多行。
</td>
</tr>
<tr>
<td>
html-script
</td>
<td>
false
</td>
<td>
混合高亮html和script脚本，但是你必须载入xml的笔刷shBrushXml.js
</td>
</tr>
<tr>
<td>
smart-tabs
</td>
<td>
false
</td>
<td>
智能缩进。有时候开启，能确保你的代码格式保持原貌，毕竟通过网页显示后缩进有些变形
</td>
</tr>
<tr>
<td>
tab-size
</td>
<td>
4
</td>
<td>
自定义tab宽度
</td>
</tr>
<tr>
<td>
toolbar
</td>
<td>
true
</td>
<td>
是否显示工具栏（有问号的那个）。如果已将collapse打开，就不要关掉这个，否则就看不到代码了
</td>
</tr>
</table>

<p>
以上配置选项都可以在&lt;pre&gt;标签的class中使用，例如：
</p>
<pre class="brush:php; html-script:true; toolbar:true; collapse:true" title="混合高亮html和php脚本">
    &lt;pre class="brush:php; html-script:true; toolbar:true; collapse:true" title="混合高亮html和php脚本"&gt;
      &lt;html&gt;
        &lt;body&gt;
          &lt;div style="font-weight: bold"&gt;&lt;?= str_replace("\n", "&lt;br/&gt;", $var) ?&gt;&lt;/div&gt;
          &lt;?
          /***********************************
           ** Multiline block comments
           **********************************/
          $stringWithUrl = "http://alexgorbatchev.com";
          $stringWithUrl = 'http://alexgorbatchev.com';
          ob_start("parseOutputBuffer");      // Start Code Buffering
          session_start();
          ?&gt;
        &lt;/body&gt;
      &lt;/html&gt;
    &lt;/pre&gt;
</pre>

<h3 id="toc_1.3.2">使用 <code>SyntaxHighlighter.config.配置选项='值'</code> 的方式配置的选项</h3>

<table>
<tr>
<th>
配置选项
</th>
<th>
缺省值
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
bloggerMode
</td>
<td>
false
</td>
<td>
不理解，没用过
</td>
</tr>
<tr>
<td rowspan="2">
strings
</td>
<td rowspan="2">
--
</td>
<td>
允许用户自定义系统消息:expandSource,help,alert,noBrush,brushNotHtmlScript
</td>
</tr>
<tr>
<td>
配置方法：SyntaxHighlighter.config.strings.noBrush="你是不是忘了拿刷子了？"
</td>
</tr>
<tr>
<td>
stripBrs
</td>
<td>
false
</td>
<td>
如果你的编辑软件为每一行的结束自动加上&lt;br&gt;标签,这个选项允许你忽略它们
</td>
</tr>
<tr>
<td>
tagName
</td>
<td>
'pre'
</td>
<td>
配置代码块的标签。没事别动，用默认的pre比较好
</td>
</tr>
</table>

<h3 id="toc_1.3.3">配置示例</h3>
<pre class="brush:js">
    SyntaxHighlighter.defaults['toolbar']=false;//隐藏问号按钮
    SyntaxHighlighter.defaults['class-name']='highlightsetting';//自定义CSS设置
    SyntaxHighlighter.defaults['auto-links']=false;//超链接设定显示为文字
    SyntaxHighlighter.config.space=' ';//消除Chrome复制时的空白BUG
    SyntaxHighlighter.all();
</pre>
<p>
在样式文件中添加： 
</p>
<pre class="brush:css">
    .highlightsetting {
        /*修正右边滚动条之BUG*/
        overflow-y: hidden !important;
        /*加入代码边框*/
        border: 1px solid #2187BB;
    }
</pre>

<h2 id="toc_1.4">去掉SyntaxHighlighter 3.0.83 右边的滚动条</h2>
<p>
修改你所使用的 core 系列样式文件，如 shCore.css。
</p>

<h3 id="toc_1.4.1">方法一：</h3>
<p>
修改<code>.syntaxhighlighter table</code>：
</p>
<pre class="brush:css; highlight:3">
    .syntaxhighlighter table {
      width: 100% !important;
      margin: 1px 0 !important;
    }
</pre>
  
<h3 id="toc_1.4.2">方法二：</h3>
<p>
修改 <code>.syntaxhighlighter</code>：
</p>
<pre class="brush:css; highlight:7">
    .syntaxhighlighter {
      width: 100% !important;
      margin: 1em 0 1em 0 !important;
      position: relative !important;
      overflow: auto !important;
      font-size: 1em !important;
      padding:1px;
    }
</pre>

<h2 id="toc_1.5">参考网站</h2>
<ol>
<li>
<a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter 官网</a>

<li>
<a href="http://hi.baidu.com/codeeye/blog/item/7394f9311e20c05e251f14a8.html">http://hi.baidu.com/codeeye/blog/item/7394f9311e20c05e251f14a8.html</a>

<li>
<a href="http://www.pyawen.com/2011/04/%E5%8E%BB%E6%8E%89chrome%E4%B8%8Bsyntaxhighlighter%E5%8F%B3%E8%BE%B9%E6%BB%9A%E5%8A%A8%E6%9D%A1/">http://www.pyawen.com/2011/04/%E5%8E%BB%E6%8E%89chrome%E4%B8%8Bsyntaxhighlighter%E5%8F%B3%E8%BE%B9%E6%BB%9A%E5%8A%A8%E6%9D%A1/</a>

</ol>
<hr />
<p>
Tags: SyntaxHighlighter, VimWiki, Vim
</p>

          <div id="copy"></div>
        </div> <!-- /.span9 -->
        <div class="span3">
          <iframe src="http://t.163.com/page/widget.html?yansi|615|1|2" allowTransparency="true" frameborder="0" scrolling="no" width="100%" height="615"></iframe>
        </div> <!-- /.span3 -->
      </div> <!-- /.row-fluid -->

      <footer class="footer">
      <p class="pull-right"><a href="#">回到顶部</a></p>
      <div id=license>
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/"><img alt="知识共享许可协议" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/cn/88x31.png" /></a>
        <p>除非另有声明，本站作品由<a href="https://twitter.com/yysfirecn">@幽谷奇峰</a>创作，<br />采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/">知识共享署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议</a>进行许可。
        </p>
      </div> 
      <!--/#license-->
      <p>Generated by <a href="http://code.google.com/p/vimwiki/">Vimwiki</a>. Powered by <a href="https://github.com">GitHub Pages</a>.</p>
      </footer> <!-- /footer -->
    </div> <!-- /.container-fluid -->

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script src="../bootstrap/js/bootstrap.min.js"></script>
    <script src="../google-code-prettify/prettify.js"></script>
    <script src="../myapp.js"></script>

    <!-- Baidu Button BEGIN -->
    <script type="text/javascript" id="bdshare_js" data="type=slide&img=7&pos=right&uid=774188" ></script>
    <script type="text/javascript" id="bdshell_js"></script>
    <script type="text/javascript">
      var bds_config = {"bdTop":300};
      document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + new Date().getHours();
    </script>
    <!-- Baidu Button END -->
  </body>
</html>
